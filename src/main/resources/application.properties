# App
spring.application.name=planiar

# DataSource: prefer env vars; fallback a H2 en local
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:h2:mem:planiar;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:sa}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:}
# Default to H2 driver for local development; set SPRING_DATASOURCE_DRIVER to override (e.g., org.postgresql.Driver)
spring.datasource.driver-class-name=${SPRING_DATASOURCE_DRIVER:org.h2.Driver}

# Hikari (pool) - valores razonables
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.pool-name=PlaniarHikariCP
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.max-lifetime=1800000

# JPA / Hibernate
spring.jpa.show-sql=${SPRING_JPA_SHOW_SQL:true}
spring.jpa.properties.hibernate.format_sql=true
# By default use env var; set to 'update' in prod (or use migrations)
spring.jpa.hibernate.ddl-auto=${SPRING_JPA_HIBERNATE_DDL_AUTO:update}
# Default Hibernate dialect for local H2 database; override with SPRING_HIBERNATE_DIALECT in production
spring.jpa.properties.hibernate.dialect=${SPRING_HIBERNATE_DIALECT:org.hibernate.dialect.H2Dialect}

# Flyway migrations: controllable via env var SPRING_FLYWAY_ENABLED (set to false in environments where you don't want migrations)
spring.flyway.enabled=${SPRING_FLYWAY_ENABLED:true}

# Actuator (debug/health)
management.endpoints.web.exposure.include=health,info,metrics,loggers
management.endpoint.health.show-details=always
management.server.port=8080


logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

